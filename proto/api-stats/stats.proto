syntax = "proto3";

package stats;

option go_package = "github.com/ethn1ee/pi-protos/gen/go/api-stats";

service Stats {
  rpc StreamCpu(Empty) returns (stream CpuResponse) {}
  rpc StreamDisk(Empty) returns (stream DiskResponse) {}
  rpc StreamHost(Empty) returns (stream HostResponse) {}
  rpc StreamMemory(Empty) returns (stream MemoryResponse) {}
  rpc StreamTemperature(Empty) returns (stream TemperatureResponse) {}
}

message Empty {}

message CpuResponse {
  repeated double percent = 1;
  double clock = 2;
}

message DiskResponse {
  uint64 total = 1;
  uint64 free = 2;
  uint64 used = 3;
  double used_percent = 4;
}

message HostResponse {
  uint64 boot_time = 1;
  uint64 uptime = 2;
  uint64 processes = 3;
  string os = 4;
  string platform = 5;
  string architecture = 6;
}

message MemoryResponse {
  uint64 total = 1;
  uint64 available = 2;
  uint64 used = 3;
  double used_percent = 4;
}

message TemperatureResponse {
  double cpu = 1;
  double nvme = 2;
}
